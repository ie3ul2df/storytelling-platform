<!-- FILE: templates/stories/story_detail.html -->

{% extends "base.html" %}

{% block content %}
<h2>{{ story.title }}</h2>
<p><strong>By:</strong> {{ story.author.username }}</p>
<p>{{ story.description }}</p>

<hr>
<h3>Chapters</h3>

{% for chapter in chapters %}
<div class="card mb-4 {% if chapter == main_chapter %}border-primary{% endif %}">
    <div class="card-body">
        <h4 class="card-title">{{ chapter.title }}</h4>
        <p class="card-text">{{ chapter.content|linebreaks }}</p>
        <p class="text-muted"><em>By {{ chapter.author.username }}</em></p>

        {% if story.allow_contributions or story.author == user %}
        <a href="{% url 'chapter_create' story.id %}?parent={{ chapter.id }}" class="btn btn-outline-primary mt-2">
            âž• Add your chapter to this story
        </a>
        {% endif %}
    </div>
</div>
{% empty %}
<p>This story has no chapters yet.</p>
{% endfor %}

{% endblock %}