{% extends "base.html" %}

{% block content %}
<h1>Top Stories</h1>

{% for story in stories %}
<div class="my-4">
    <div class="p-2 rounded d-flex justify-content-between align-items-center bg-secondary">
        <h2 class="mt-2 text-muted fw-bold">{{ story.title }}</h2>
        {% with story.total_rank as rating %}
        <span class="ms-4 text-muted fw-bold"> 🏆
            {% for i in "12345"|make_list %}
            {% if forloop.counter <= rating %} ★ {% else %} ☆ {% endif %} {% endfor %} ({{ rating|floatformat:"1" }}/5)
                </span>
                {% endwith %}
    </div>
    <p><strong>By:</strong> {{ story.author.username }}</p>
    <p>{{ story.description|truncatewords:100 }}</p>

    <a href="{% url 'story_detail' story.id %}" class="btn btn-outline-primary">Read More 👀</a>
</div>
{% empty %}
<p>No stories yet.</p>
{% endfor %}
{% endblock %}